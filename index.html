<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<title>Bracketology Builder</title>
<link href="/favicon.svg" rel="icon" type="image/svg+xml"/>
<link href="/favicon.svg" rel="apple-touch-icon"/>
<link href="./style.css?v=20260207f" rel="stylesheet"/>
</head>
<body>
<header class="topbar">
<div class="brandWrap">
<div class="brandRow">
<div class="brand">Bracketology Builder</div>
<img alt="Bracketology Builder logo" class="brandLogo" src="/logo.svg"/>
</div>
<div class="subbrand">Presented by <span class="creator">RobbyBrackets</span></div>
</div>
<div class="actions">

<div class="anonMobileBar" id="anonMobileBar" aria-label="Quick actions">
      <button id="mobileLogoutBtn" type="button" aria-label="Log out">Log out</button>

  <button class="btn anonStartBtn" id="anonStartBtn" type="button">üèÄ Start a Bracket</button>
  <div class="anonStartSub">Build first. Save anytime.</div>
  <button class="btn" id="anonRandomBtn" type="button">Random picks</button>
  <button class="btn ghost" id="anonUndoBtn" type="button">Undo</button>
</div>
<div class="actionRow">
<button class="btn ghost" id="accountBtn">Sign in</button>
<button class="btn" id="signupQuickBtn">Sign up</button>
</div>
<div class="actionRow">
  <button class="btn ghost" id="undoBtnHeader" type="button" disabled>Undo</button>
  <button class="btn ghost" id="saveBtnHeader" title="Saves your current picks" type="button">Save</button>
</div>
<div class="actionRow">
  <button class="btn" id="randomPicksBtnHeader" type="button">Random picks</button>
  <button class="btn ghost" id="saveBtn" title="Saves your current picks" type="button">Save</button>
  <button class="btn ghost" id="bracketsBtn" type="button">My Brackets</button>
</div>
<div class="signinHint" id="signinHint">Save your bracket.</div>
</div>
</header>
<div class="stickyNav">
<nav aria-label="Primary" class="siteNav">
<a class="navLink active" data-view="build" href="#home">Home</a>
<a class="navLink" data-view="mybrackets" href="my-brackets.html">My Brackets</a>
<a class="navLink" data-view="best" href="best-challenge.html">Best Bracket Challenge</a>
<a class="navLink" data-view="worst" href="worst-challenge.html">Worst Bracket Challenge</a>
<a class="navLink" data-view="featured" href="#featured">Featured Brackets</a>
<a class="navLink" data-view="upcoming" href="#upcoming">Upcoming Events</a>
<a class="navLink adminOnly" data-view="adminbrackets" href="#adminbrackets" style="display:none">Admin: All Brackets</a>
<a class="navLink adminOnly" data-view="adminfeatured" href="#adminfeatured" style="display:none">Admin: Featured Review</a>
</nav>
</div>
<div aria-live="polite" class="seasonBar" id="seasonBar">
<div class="seasonText" id="seasonText"></div>
<div class="seasonControls">
<div class="lockStatus" id="lockStatus" style="display:none;"></div>
<button class="btnMini lockEditBtn" id="lockEditBtn" style="display:none;" type="button">Lock</button>
<button class="btnMini seasonEditBtn" id="seasonEditBtn" style="display:none;" type="button">Edit</button>
</div>
</div>
<!-- roundBar removed (was causing stray text/overlap on some devices) -->
<main class="wrap">
<!-- HOME / BUILD -->
<div class="view" id="view-build">
<!-- ESPN-style desktop layout: regions on left/right, final rounds in the center -->
<section class="espnDesk" id="ncaaFullSection">
<div class="deskCol left">
<div id="region-Midwest"></div>
<div id="region-East"></div>
</div>
<div class="deskCol center">

<div class="bracketTitleRow homeTitleRow">
  <input id="bracketPageTitle" class="bracketPageTitle bracketPageTitleInput" type="text" maxlength="80" value="" placeholder="Enter Bracket Name Here" />
            <button class="btn btnCompact" id="randomPicksBtnTop" type="button">Random picks</button>
  <button class="btn primary btnCompact" id="saveEnterBtnTop" type="button">Save &amp; Enter</button>
  <button class="btn btnCompact" id="undoBtnTop" type="button" disabled>Undo</button>
          </div>

<div class="centerStack">
  <!-- Box 1: Final 4 + Championship -->
      <div class="panel final4Panel">
    
              <div class="panelHead">
                <h2>FINAL 4</h2>
              </div>
<div class="panelHead final4Head">
      <h2 class="roundTitle">Final 4</h2>
      <h2 class="roundTitle champTitle">Championship</h2>
    </div>
    <div class="finalFourBoard" id="finalFourBoard"></div>

    <!-- Phase 3 (mobile only): completion cue shown after the user starts interacting, hidden after save -->
    <div id="phase3Cue" class="phase3Cue" aria-hidden="true">
      <div class="phase3Headline"><strong>Save multiple brackets as projections change.</strong></div>
      <div class="phase3Subtext">Finish your Final Four ‚Üí Submit your bracket for a chance to be featured on TikTok or the site.</div>
    </div>
  </div>

  <!-- Box 2: Champion (finalists + champion) + actions -->
  <div class="panel">
    <div class="panelHead">
      <h2>Champion</h2>
    </div>
    <div class="championBoard" id="championBoard"></div>
    <div class="tiebreakerRow">
      <div class="tiebreakerLabel">Tiebreaker: Total Points in Final</div>
      <input id="tiebreakerTotal" class="tiebreakerInput" type="number" inputmode="numeric" min="0" max="400" placeholder="Enter total points" />
    </div>


    <div class="featureAfterSaveRow" id="featureAfterSaveRow" style="display:none;">
      <button class="btn" id="submitFeaturedAfterSaveBtn" type="button">üèÄ Submit for Featured</button>
      <div class="featureAfterSaveMsg" id="featureAfterSaveMsg" aria-live="polite"></div>
    </div>

    <div class="bracketActionRow">
      <button class="btn" id="randomPicksBtn" type="button">Random picks</button>
      <button class="btn" id="saveEnterBtn" type="button">Save / Enter</button>
    </div>
    <div class="tinyMuted" id="homeRandomWorstHint">Random Picks are great for the Worst Bracket Challenge.</div>
  </div>

  <!-- Box 3: Join a Challenge -->
  <div class="panel" id="homeChallengePanel">
    <div class="panelHead">
      <h2>Join a Challenge</h2>
</div>
    <div class="challengeActions" style="gap:10px;flex-wrap:wrap">
      <button class="btn" id="homeGoBest">Best Bracket Challenge</button>
      <button class="btn" id="homeGoWorst">Worst Bracket Challenge</button>
    </div>
    <div class="muted" id="homeChallengeMsg" style="margin-top:10px;display:none">Challenges can only be played once the official bracket comes out.</div>
  </div>
	</div>
	</div>
	<div class="deskCol right">
<div id="region-West"></div>
<div id="region-South"></div>
</div>
</section>
</div>
<!-- BEST CHALLENGE -->
<div class="view hidden" id="view-best">
<section class="panel">
<div class="panelHead">
<h2>Best Bracket Challenge</h2>
<div class="subhead">Most correct picks wins. Every game is worth 10 points.</div>
</div>
<div class="challengeLayout">
<div class="challengeMain">
<div class="card rulesCard"><div id="bestRules"></div></div>
<div class="card"><div class="cardTitle">Enter</div><div class="challengeActions" id="bestActions"></div><div id="bestEntryMount"></div></div>
</div>
<div class="challengeSide">
<div class="card leaderboardCard">
<div class="cardTitle">Leaderboard</div>
<div id="bestLeaderboard"></div>
</div>
</div>
</div>
</section>
<div class="challengeMsg" id="bestChallengeMsg">
        Challenges can only be played once the official bracket comes out.
        <a class="remindLink" data-remind="best" href="#">Click here for a reminder once brackets are set.</a>
</div>
</div>
<!-- WORST CHALLENGE -->
<div class="view hidden" id="view-worst">
<section class="panel">
<div class="panelHead">
<h2>Worst Bracket Challenge</h2>
<div class="subhead">Pick the losers. Every game is worth 10 points when your pick is WRONG.</div>
</div>
<div class="challengeLayout">
<div class="challengeMain">
<div class="card rulesCard"><div id="worstRules"></div></div>
<div class="card"><div class="cardTitle">Enter</div><div class="challengeActions" id="worstActions"></div><div id="worstEntryMount"></div></div>
</div>
<div class="challengeSide">
<div class="card leaderboardCard">
<div class="cardTitle">Leaderboard</div>
<div id="worstLeaderboard"></div>
</div>
</div>
</div>
</section>
<div class="challengeMsg" id="worstChallengeMsg">
        Challenges can only be played once the official bracket comes out.
        <a class="remindLink" data-remind="worst" href="#">Click here for a reminder once brackets are set.</a>
</div>
</div>

<div class="view hidden" id="view-best2">
  <h2>Best Bracket Challenge ‚Äî Second Chance</h2>
  <p class="muted">Second Chance brackets start once the Sweet 16 is set. This page will go live then.</p>
  <div class="challengeLockMsg">
    Challenges can only be played once the official bracket comes out.
  </div>

    <div class="panel emailAlerts" style="margin:14px 0">
    <div class="panelHead"><h3 style="margin:0">Get Challenge Reminders</h3></div>
    <div style="padding:12px 16px">
      <div class="row">
        <input id="remindEmailBest2" class="input" type="email" placeholder="Enter your email" style="max-width:360px">
        <button class="btn primary" id="remindBtnBest2" type="button">Sign me up</button>
      </div>
      <div class="checks" style="margin-top:10px">
        <label class="checkRow"><input id="leadLiveBest2" type="checkbox" checked> <span>Get alerts when official brackets go live</span></label>
        <label class="checkRow"><input id="leadUpcomingBest2" type="checkbox" checked> <span>Get notified of upcoming challenges</span></label>
        <label class="checkRow"><input id="leadOffersBest2" type="checkbox"> <span>Get alerted of sports betting partner offers</span></label>
      </div>
      <div id="remindMsgBest2" class="signinHint" style="margin-top:8px"></div>
    </div>
  </div>

  <div class="challengeActions">
    <button class="btn" disabled="disabled">Enter Second Chance</button>
    <button class="btn" disabled="disabled">View Leaderboard</button>
  </div>
</div>

<div class="view hidden" id="view-worst2">
  <h2>Worst Bracket Challenge ‚Äî Second Chance</h2>
  <p class="muted">Second Chance brackets start once the Sweet 16 is set. This page will go live then.</p>
  <div class="challengeLockMsg">
    Challenges can only be played once the official bracket comes out.
  </div>

    <div class="panel emailAlerts" style="margin:14px 0">
    <div class="panelHead"><h3 style="margin:0">Get Challenge Reminders</h3></div>
    <div style="padding:12px 16px">
      <div class="row">
        <input id="remindEmailWorst2" class="input" type="email" placeholder="Enter your email" style="max-width:360px">
        <button class="btn primary" id="remindBtnWorst2" type="button">Sign me up</button>
      </div>
      <div class="checks" style="margin-top:10px">
        <label class="checkRow"><input id="leadLiveWorst2" type="checkbox" checked> <span>Get alerts when official brackets go live</span></label>
        <label class="checkRow"><input id="leadUpcomingWorst2" type="checkbox" checked> <span>Get notified of upcoming challenges</span></label>
        <label class="checkRow"><input id="leadOffersWorst2" type="checkbox"> <span>Get alerted of sports betting partner offers</span></label>
      </div>
      <div id="remindMsgWorst2" class="signinHint" style="margin-top:8px"></div>
    </div>
  </div>

  <div class="challengeActions">
    <button class="btn" disabled="disabled">Enter Second Chance</button>
    <button class="btn" disabled="disabled">View Leaderboard</button>
  </div>
</div>

<!-- FEATURED -->
<section class="view hidden" id="view-featured">
<div class="featuredIntro">
<h2>Featured Brackets</h2>
<div class="muted">Browse featured user brackets.</div>
</div>
<div class="cards" id="featuredGrid"></div>
</section>
<!-- UPCOMING -->
<section class="view hidden" id="view-upcoming">
<h2>Upcoming Events</h2>
<div class="muted">Upcoming tournaments we can run brackets for.</div>
<div class="cards" id="upcomingGrid">
<div class="card">
<div class="cardTitle">NCAA Men‚Äôs Tournament (Pre + Official)</div>
<div class="muted">Projection bracket, Best Bracket, Worst Bracket.</div>
</div>
<div class="card">
<div class="cardTitle">NBA Playoffs</div>
<div class="muted">Best NBA Playoff Bracket ‚Ä¢ <b>You Don‚Äôt Know Ball</b> NBA Playoff Bracket</div>
</div>
<div class="card">
<div class="cardTitle">NHL Playoffs</div>
<div class="muted">Best NHL Playoff Bracket ‚Ä¢ <b>Biggest Benders</b> NHL Bracket</div>
</div>
<div class="card">
<div class="cardTitle">World Cup</div>
<div class="muted">Bracket-style competitions (coming later).</div>
</div>
</div>

    <div class="panel emailAlerts" style="margin:14px 0">
  <div class="panelHead"><h3 style="margin:0">Get Challenge Reminders</h3></div>
  <div style="padding:12px 16px">
    <div class="row">
      <input id="remindEmailUpcoming" class="input" type="email" placeholder="Enter your email" style="max-width:360px">
      <button class="btn primary" id="remindBtnUpcoming" type="button">Sign me up</button>
    </div>
    <div class="checks" style="margin-top:10px">
      <label class="checkRow"><input id="leadLiveUpcoming" type="checkbox" checked> <span>Get alerts when official brackets go live</span></label>
      <label class="checkRow"><input id="leadUpcomingUpcoming" type="checkbox" checked> <span>Get notified of upcoming challenges</span></label>
      <label class="checkRow"><input id="leadOffersUpcoming" type="checkbox"> <span>Get alerted of sports betting partner offers</span></label>
    </div>
    <div id="remindMsgUpcoming" class="signinHint" style="margin-top:8px"></div>
  </div>

</div>

  <!-- Admin-only broadcast panels live on the Upcoming Events tab (not inside the user email signup panel) -->
  <div class="panel adminBroadcast" data-segment="live" style="margin:14px 0; display:none">
    <div class="panelHead"><h3 style="margin:0">Admin: Send Official Brackets Are Live Email</h3></div>
    <div style="padding:12px 16px">
      <div class="row"><input class="input adminSubj" type="text" placeholder="Subject" style="max-width:520px"></div>
      <div class="row" style="margin-top:8px"><textarea class="input adminMsg" placeholder="Message" style="max-width:520px; height:90px"></textarea></div>
      <div class="row" style="margin-top:8px"><input class="input adminLink" type="text" placeholder="Link (optional)" style="max-width:520px" value="/index.html#home"></div>
      <div class="row" style="margin-top:10px;align-items:center">
        <button class="btn danger adminSend" type="button">Send</button>
        <span class="muted adminStatus" style="margin-left:10px"></span>
      </div>
    </div>
  </div>

  <div class="panel adminBroadcast" data-segment="upcoming" style="margin:14px 0; display:none">
    <div class="panelHead"><h3 style="margin:0">Admin: Send Upcoming Challenges Email</h3></div>
    <div style="padding:12px 16px">
      <div class="row"><input class="input adminSubj" type="text" placeholder="Subject" style="max-width:520px"></div>
      <div class="row" style="margin-top:8px"><textarea class="input adminMsg" placeholder="Message" style="max-width:520px; height:90px"></textarea></div>
      <div class="row" style="margin-top:8px"><input class="input adminLink" type="text" placeholder="Link (optional)" style="max-width:520px" value="/index.html#upcoming"></div>
      <div class="row" style="margin-top:10px;align-items:center">
        <button class="btn danger adminSend" type="button">Send</button>
        <span class="muted adminStatus" style="margin-left:10px"></span>
      </div>
    </div>
  </div>

  <div class="panel adminBroadcast" data-segment="offers" style="margin:14px 0; display:none">
    <div class="panelHead"><h3 style="margin:0">Admin: Send Betting Partner Deals Email</h3></div>
    <div style="padding:12px 16px">
      <div class="row"><input class="input adminSubj" type="text" placeholder="Subject" style="max-width:520px"></div>
      <div class="row" style="margin-top:8px"><textarea class="input adminMsg" placeholder="Message" style="max-width:520px; height:90px"></textarea></div>
      <div class="row" style="margin-top:8px"><input class="input adminLink" type="text" placeholder="Link (optional)" style="max-width:520px" value="/index.html#upcoming"></div>
      <div class="row" style="margin-top:10px;align-items:center">
        <button class="btn danger adminSend" type="button">Send</button>
        <span class="muted adminStatus" style="margin-left:10px"></span>
      </div>
    </div>
  </div>

</section>

<!-- ADMIN: ALL BRACKETS -->
<section class="view hidden" id="view-adminbrackets">
  <h2>Admin: All Brackets</h2>
  <div class="muted">Read-only list of saved brackets across all users.</div>
  <div class="panel" style="margin:14px 0">
    <div style="padding:12px 16px">
      <div id="adminBracketsMount"></div>
      <div class="row" style="margin-top:12px; gap:10px; align-items:center;">
        <button class="btn" id="adminBracketsMore" type="button">Load more</button>
        <span class="muted" id="adminBracketsStatus"></span>
      </div>
    </div>
  </div>
</section>

<!-- ADMIN: FEATURED REVIEW -->
<section class="view hidden" id="view-adminfeatured">
  <h2>Admin: Featured Review</h2>
  <div class="muted">Approve or reject user submissions for Featured Brackets.</div>
  <div class="row" style="gap:10px; align-items:center; margin:12px 0;">
    <label class="muted" for="adminFeaturedFilter">Status</label>
    <select id="adminFeaturedFilter" class="input" style="max-width:200px;">
      <option value="pending" selected>Pending</option>
      <option value="approved">Approved</option>
      <option value="rejected">Rejected</option>
    </select>
    <span class="muted" id="adminFeaturedStatus"></span>
  </div>
  <div class="cards" id="adminFeaturedMount"></div>
</section>
</main>
<!-- Brackets manager -->
<div aria-modal="true" class="overlay hidden" id="bracketsOverlay" role="dialog">
<div class="modal">
<div class="row" style="justify-content:space-between;align-items:center">
<h2 style="margin:0">My Brackets</h2>
<button class="btn ghost" id="closeBrackets">Close</button>
</div>
<div class="row" style="gap:8px;flex-wrap:wrap">
<button class="btn" id="newBracketBtn">New bracket</button>
<button class="btn ghost" id="renameBracketBtn">Rename</button>
<button class="btn danger" id="deleteBracketBtn">Delete</button>
</div>
<div class="list" id="bracketsList" style="margin-top:10px"></div>
<div class="muted small" style="margin-top:10px">Completed brackets are archived automatically when you pick a champion.</div>
</div>
</div>
<!-- Share prompt -->
<div aria-modal="true" class="overlay hidden" id="shareOverlay" role="dialog">
<div class="modal">
<h2>Share your champion</h2>
<div class="muted" id="shareSummary" style="margin-bottom:10px"></div>
<div class="row" style="gap:8px;flex-wrap:wrap">
<button class="btn" id="shareBtn">Share</button>
<button class="btn ghost" id="copyShareBtn">Copy text</button>
<button class="btn ghost" id="closeShare">Close</button>
</div>
</div>
</div>
<!-- Auth -->
<div aria-modal="true" class="overlay hidden" id="authOverlay" role="dialog">
<div class="modal">
<div class="modalHead">
<div class="modalTitle">Save your bracket</div>
<button aria-label="Close" class="iconBtn" id="authClose">‚úï</button>
</div>
<div aria-label="Authentication" class="authTabs" role="tablist">
<button class="tabBtn active" id="signInBtn" type="button">Sign in</button>
<button class="tabBtn" id="signUpBtn" type="button">Sign up</button>
</div>
<input id="authMode" type="hidden" value="signin"/>
<label class="field">
<span>Email</span>
<input autocomplete="email" id="authEmail" placeholder="you@email.com" type="email"/>
</label>
<label class="field">
<span>Password</span>
<input autocomplete="current-password" id="authPassword" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" type="password"/>
</label>
<div class="smallNote" style="margin-top:-6px; margin-bottom:10px; text-align:right;">
  <a href="#" id="forgotPwLink">Forgot password?</a>
</div>
<button class="primaryBtn" id="authSubmit">Continue</button>
<div class="smallNote">Create a free account to keep it and edit later.</div>
</div>

<div class="toast" id="toast"></div>
<script src="./data.js"></script>
<script src="./public-config.js?v=1"></script>
<script src="./app.js"></script>

<footer class="bbFooter">
  <div class="bbFooterInner">
    <p>
      BracketologyBuilder is a free entertainment platform and is not a sportsbook or gambling operator.
      We do not accept wagers or conduct betting.
    </p>
    <p>
      Some links on this site may be affiliate links. We may receive compensation if users sign up through these links.
    </p>
    <p>21+ where applicable. Please gamble responsibly.</p>
    <p>
      <a href="affiliate-disclosure.html">Affiliate Disclosure</a> |
      <a href="terms.html">Terms of Service</a>
    </p>
  </div>
</footer>


<!-- MOBILE_ANON_3BUTTONS_SAFE -->
<script>
(function(){
  function isMobile(){ return window.matchMedia && window.matchMedia('(max-width: 900px)').matches; }
  function isAnon(){
    var b = document.getElementById('accountBtn');
    if(!b) return true;
    var t = (b.textContent || '').trim().toLowerCase();
    return (t === 'sign in' || t === 'signin' || t === 'log in' || t === 'login');
  }

  function setMetaForNewBracket(){
    try{
      // Keys are defined in app.js (STORAGE_KEY/STORAGE_META)
      var STORAGE_KEY = 'bb_v30_picks_local';
      var STORAGE_META = 'bb_v30_meta';

      // Clear picks + saved bracket binding so Save creates a new bracket
      localStorage.setItem(STORAGE_KEY, JSON.stringify({}));

      var meta = {};
      try{ meta = JSON.parse(localStorage.getItem(STORAGE_META) || '{}'); }catch(e){ meta = {}; }
      meta.bracketId = null;
      meta.bracketTitle = '';
      localStorage.setItem(STORAGE_META, JSON.stringify(meta));
    }catch(e){}
  }

  function apply(){
    var mobile = !!isMobile();
    var anon = !!isAnon();

    document.body.classList.toggle('anonMobile',  !!(mobile && anon));
    document.body.classList.toggle('authMobile',  !!(mobile && !anon));

    // Update the big blue button label depending on auth state
    var start = document.getElementById('anonStartBtn');
    if(start){
      start.textContent = (anon ? 'üèÄ Start a Bracket' : 'üèÄ Create Another Bracket');
    }

    // Mobile top-right button: show Log in when anon, Log out when signed in
    var logoutBtn = document.getElementById('mobileLogoutBtn');
    if(logoutBtn){
      logoutBtn.textContent = (anon ? 'Log in' : 'Log out');
      logoutBtn.setAttribute('aria-label', (anon ? 'Log in' : 'Log out'));
    }
  }

  function wire(){
    var start = document.getElementById('anonStartBtn');
    var rand  = document.getElementById('anonRandomBtn');
    var undo  = document.getElementById('anonUndoBtn');
    var logoutBtn = document.getElementById('mobileLogoutBtn');

    if(start){
      start.addEventListener('click', function(){
        // When signed in on mobile, reset storage so Save creates a new bracket
        // (UI-only nudge to encourage multiple brackets; no server/schema changes)
        try{
          var mobile = isMobile();
          var anon = isAnon();
          if(mobile && !anon){
          setMetaForNewBracket();

          // Wait a tick so layout stabilizes, then nudge down slightly (prevents flicker)
          setTimeout(function(){
            try{
              window.scrollBy({ top: 100, behavior: 'smooth' });
            }catch(e){}
          }, 50);

          return;
        }
        }catch(e){}

        // Default behavior (anon flow): scroll to bracket builder area
        try{
          document.querySelectorAll('.geo').forEach(function(g){ g.scrollLeft = 0; });
          var target = document.querySelector('#region-Midwest') || document.querySelector('#view-build') || document.querySelector('main') || document.body;
          target.scrollIntoView({behavior:'smooth', block:'start'});
        }catch(e){}
      });
    }

    if(rand){
      rand.addEventListener('click', function(){
        var b = document.getElementById('randomPicksBtnHeader') || document.getElementById('randomBtnHeader');
        if(b) b.click();
      });
    }

    if(undo){
      undo.addEventListener('click', function(){
        var b = document.getElementById('undoBtnHeader') || document.getElementById('undoBtn');
        if(b) b.click();
      });
    }

    if(logoutBtn){
      logoutBtn.addEventListener('click', function(){
        // If the user is logged out, this acts as a quick "Log in" entry point on mobile.
        // If the user is logged in, it behaves as Log out.
        try{
          var anon = isAnon();
          if(anon){
            var acct = document.getElementById('accountBtn');
            if(acct) acct.click();
            return;
          }

          // Best-effort logout. Works with either GET or POST implementations.
          fetch('/api/logout', { method: 'POST', credentials: 'include' })
            .catch(function(){ return fetch('/api/logout', { method: 'GET', credentials: 'include' }); })
            .finally(function(){ window.location.href = '/'; });
        }catch(e){
          window.location.href = '/api/logout';
        }
      });
    }


    var acct = document.getElementById('accountBtn');
    if(acct && window.MutationObserver){
      var mo = new MutationObserver(function(){ apply(); });
      mo.observe(acct, { childList:true, characterData:true, subtree:true });
    }
    window.addEventListener('resize', function(){ apply(); }, {passive:true});
    apply();
  }

  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', wire);
  } else {
    wire();
  }
})();
</script>


<script id="officialLiveFlag">
(function(){
  try{
    fetch('/api/public-config')
      .then(r=>r.json())
      .then(cfg=>{
        if(cfg && (cfg.official_bracket_live || cfg.officialLive)){
          document.body.classList.add('officialLive');
        }
      })
      .catch(()=>{});
  }catch(e){}
})();
</script>

</body>
</html>